{% extends "simple/base.html" %}

{% block title %}–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è - AI Fitness Coach{% endblock %}

{% block content %}
<div class="row">
    <div class="col-lg-8 mx-auto">
        <div class="card shadow">
            <div class="card-header gradient-bg text-white text-center">
                <h4 class="mb-0">üéØ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–≥–æ –ø–ª–∞–Ω–∞</h4>
            </div>
            <div class="card-body p-4">
                <form method="POST" action="{{ url_for('onboarding_submit') }}">
                    <!-- Questions -->
                    {% for question in questions %}
                    <div class="mb-4">
                        <h6 class="fw-bold mb-3">{{ loop.index }}. {{ question.question }}</h6>
                        <div class="row">
                            {% for option in question.options %}
                            <div class="col-md-6 mb-2">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" 
                                           name="{{ question.id }}" 
                                           id="{{ question.id }}_{{ loop.index0 }}" 
                                           value="{{ option }}" required>
                                    <label class="form-check-label" for="{{ question.id }}_{{ loop.index0 }}">
                                        {{ option }}
                                    </label>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endfor %}

                    <!-- Archetype Selection -->
                    <div class="mb-4">
                        <h6 class="fw-bold mb-3">–í—ã–±–µ—Ä–∏—Ç–µ –∞—Ä—Ö–µ—Ç–∏–ø —Ç—Ä–µ–Ω–µ—Ä–∞:</h6>
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <div class="archetype-card card h-100 text-center p-3" onclick="selectArchetype('bro', this)">
                                    <div class="fs-1 mb-2">üí™</div>
                                    <h6 class="fw-bold">–ë—Ä–æ</h6>
                                    <p class="small text-muted mb-0">–î—Ä—É–∂–µ–ª—é–±–Ω—ã–π, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π, –º–æ—Ç–∏–≤–∏—Ä—É—é—â–∏–π –±—Ä–∞—Ç–∞–Ω</p>
                                    <input type="radio" name="archetype" value="bro" style="display: none;">
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="archetype-card card h-100 text-center p-3" onclick="selectArchetype('sergeant', this)">
                                    <div class="fs-1 mb-2">üéñÔ∏è</div>
                                    <h6 class="fw-bold">–°–µ—Ä–∂–∞–Ω—Ç</h6>
                                    <p class="small text-muted mb-0">–°—Ç—Ä–æ–≥–∏–π, –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, —Ç—Ä–µ–±–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π</p>
                                    <input type="radio" name="archetype" value="sergeant" style="display: none;">
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="archetype-card card h-100 text-center p-3" onclick="selectArchetype('intellectual', this)">
                                    <div class="fs-1 mb-2">üß†</div>
                                    <h6 class="fw-bold">–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª</h6>
                                    <p class="small text-muted mb-0">–ù–∞—É—á–Ω—ã–π –ø–æ–¥—Ö–æ–¥, –æ–±—ä—è—Å–Ω–µ–Ω–∏—è, –∞–Ω–∞–ª–∏–∑</p>
                                    <input type="radio" name="archetype" value="intellectual" style="display: none;">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="d-grid">
                        <button type="submit" class="btn btn-success btn-lg">üöÄ –°–æ–∑–¥–∞—Ç—å –º–æ–π –ø–ª–∞–Ω —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
function selectArchetype(value, element) {
    // Remove selected class from all cards
    document.querySelectorAll('.archetype-card').forEach(card => {
        card.classList.remove('selected');
    });
    
    // Add selected class to clicked card
    element.classList.add('selected');
    
    // Set radio button value
    element.querySelector('input[type="radio"]').checked = true;
}

// Auto-select first archetype
document.addEventListener('DOMContentLoaded', function() {
    const firstCard = document.querySelector('.archetype-card');
    if (firstCard) {
        selectArchetype('bro', firstCard);
    }
});
</script>
{% endblock %}